<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="JeTAimeDeToutMonCoeurEtJeSuisHeureuxDeFaireMaVieATesCotes.css">
    <title>Suivi de colis</title>
</head>
<body>
    <div id="imgLeft">
        <img src="Images/marker.png" width="100" height="100" alt="logo laposte" id="logoLaposte">
        <h1 class="textLocationLeft">Annecy</h1>
    </div>
    <div id="cadreSuivi">
        <div id="barreSuivi">
            <div id="barreProgression">
                <img id="imgBarre" src="Images/tgv.png" width="133" height="70"/>
            </div>
        </div>
    <div id="imgRight">
        <img id="imgRight" src="Images/marker.png" width="100" height="100" alt="logo laposte" id="logoLaposte">
        <h1 class="textLocationRight">Roanne</h1>
    </div>


    <script>
        const dateSortie = new Date(2023, 0, 11, 19, 42);
        let barre = document.getElementById("barreProgression");
        let image = new Image(100, 200);
        image.src = "Images/laposte.png";
        console.log(image);

        console.log(dateSortie);

        function afficheTemps() {
            //Temps restant en millisecondes
            let dateAjd = new Date(Date.now());
            console.log(dateAjd);
            let tempsRestant = dateSortie - dateAjd;
            if(tempsRestant<=0) {
                tempsRestant = 0;
            }
            console.log(tempsRestant);

            //actualisation de la barre de progression
            actualisationBarre(63989804, tempsRestant, barre);
        };

        function actualisationBarre(tempsBase, tempsRestant, barreProgression) {
            let poucentageProgression = 100-tempsRestant*100/tempsBase;

            console.log(poucentageProgression);

            //On ajoute 50 pourcent parce que flemme de faire un truc propre
            poucentageProgression += 50;

            //actualisation de la barre
            barreProgression.style.width = poucentageProgression + "%";
        } 

        setInterval(afficheTemps, 1000);
    </script>
</body>
</html>
